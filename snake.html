<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- é€‚é…ç§»åŠ¨ç«¯ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è´ªåƒè›‡æ¸¸æˆ | xxx.github.io</title>
    <style>
        /* é¡µé¢æ•´ä½“æ ·å¼ - æŸ”å’Œé£æ ¼ */
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f8f9fa;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
            padding-bottom: 100px; /* ç»™è§¦æ§æŒ‰é’®ç•™ç©ºé—´ */
        }

        /* æ¸¸æˆæ ‡é¢˜ - æŸ”å’Œå­—ä½“+æ¸å˜ */
        h1 {
            color: #2c3e50;
            margin: 20px 0;
            font-size: 2.2rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            background: linear-gradient(90deg, #3498db, #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* åˆ†æ•°æ˜¾ç¤º - æŸ”å’Œæ ·å¼ */
        .score {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 15px;
            color: #34495e;
            padding: 8px 20px;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        /* æ¸¸æˆç”»å¸ƒ - åœ†è§’+æŸ”å’Œé˜´å½± */
        #gameCanvas {
            border: none;
            border-radius: 10px;
            background-color: #fff;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        /* æ¸¸æˆç»“æŸæç¤º - æŸ”å’Œå¼¹çª— */
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: 600;
            color: #e74c3c;
            display: none;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 25px 40px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            text-align: center;
            line-height: 1.6;
        }

        /* è§¦æ§æŒ‰é’®å®¹å™¨ */
        .control-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            gap: 10px;
        }

        /* æ–¹å‘æŒ‰é’®æ ·å¼ - æŸ”å’Œåœ†è§’+æ¸å˜ */
        .dir-btn {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, #3498db, #2980b9);
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            outline: none;
        }

        .dir-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(52, 152, 219, 0.3);
        }

        /* ä¸­é—´è¡ŒæŒ‰é’®å¸ƒå±€ */
        .middle-btns {
            display: flex;
            gap: 10px;
        }

        /* é‡æ–°å¼€å§‹æŒ‰é’® */
        .restart-btn {
            margin-top: 20px;
            padding: 10px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            color: white;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .restart-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <h1>è´ªåƒè›‡å°æ¸¸æˆ</h1>
    <div class="score">å½“å‰åˆ†æ•°: <span id="scoreNum">0</span></div>
    <canvas id="gameCanvas" width="360" height="360"></canvas>
    <div class="game-over" id="gameOver">æ¸¸æˆç»“æŸå•¦ ğŸ˜¢<br>åˆ†æ•°: <span id="finalScore">0</span><br>ç‚¹å‡»æŒ‰é’®é‡æ–°å¼€å§‹</div>

    <!-- è§¦æ§æ–¹å‘æŒ‰é’® -->
    <div class="control-buttons">
        <button class="dir-btn" id="upBtn">â†‘</button>
        <div class="middle-btns">
            <button class="dir-btn" id="leftBtn">â†</button>
            <button class="dir-btn" id="downBtn">â†“</button>
            <button class="dir-btn" id="rightBtn">â†’</button>
        </div>
        <button class="restart-btn" id="restartBtn">é‡æ–°å¼€å§‹æ¸¸æˆ</button>
    </div>

    <script>
        // è·å–ç”»å¸ƒå’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreNum = document.getElementById('scoreNum');
        const gameOver = document.getElementById('gameOver');
        const finalScore = document.getElementById('finalScore');
        
        // è§¦æ§æŒ‰é’®
        const upBtn = document.getElementById('upBtn');
        const downBtn = document.getElementById('downBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const restartBtn = document.getElementById('restartBtn');

        // æ¸¸æˆé…ç½®
        const gridSize = 20; // æ¯ä¸ªæ ¼å­çš„å¤§å°ï¼ˆåƒç´ ï¼‰
        const gridCount = canvas.width / gridSize; // ç”»å¸ƒçš„æ ¼å­æ•°é‡

        // è›‡çš„åˆå§‹çŠ¶æ€
        let snake = [{ x: 9, y: 9 }]; // è›‡å¤´åˆå§‹ä½ç½®ï¼ˆé€‚é…360ç”»å¸ƒï¼‰
        let direction = 'right'; // åˆå§‹ç§»åŠ¨æ–¹å‘
        let nextDirection = 'right'; // ä¸‹ä¸€ä¸ªç§»åŠ¨æ–¹å‘
        let food = generateFood(); // ç”Ÿæˆé£Ÿç‰©
        let score = 0; // åˆå§‹åˆ†æ•°
        let gameRunning = true; // æ¸¸æˆè¿è¡ŒçŠ¶æ€

        // é”®ç›˜æ§åˆ¶ï¼ˆä¿ç•™ï¼‰
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                    if (direction !== 'down') nextDirection = 'up';
                    break;
                case 'ArrowDown':
                    if (direction !== 'up') nextDirection = 'down';
                    break;
                case 'ArrowLeft':
                    if (direction !== 'right') nextDirection = 'left';
                    break;
                case 'ArrowRight':
                    if (direction !== 'left') nextDirection = 'right';
                    break;
                case ' ': // ç©ºæ ¼é”®é‡æ–°å¼€å§‹
                    if (!gameRunning) resetGame();
                    break;
            }
        });

        // è§¦æ§æŒ‰é’®æ§åˆ¶ï¼ˆæ–°å¢æ ¸å¿ƒï¼‰
        upBtn.addEventListener('click', () => {
            if (direction !== 'down') nextDirection = 'up';
        });
        downBtn.addEventListener('click', () => {
            if (direction !== 'up') nextDirection = 'down';
        });
        leftBtn.addEventListener('click', () => {
            if (direction !== 'right') nextDirection = 'left';
        });
        rightBtn.addEventListener('click', () => {
            if (direction !== 'left') nextDirection = 'right';
        });
        restartBtn.addEventListener('click', resetGame);

        // æ¸¸æˆä¸»å¾ªç¯ï¼ˆé€Ÿåº¦ç¨æ…¢ï¼Œæ›´å‹å¥½ï¼‰
        setInterval(gameLoop, 180);

        // æ¸¸æˆæ ¸å¿ƒé€»è¾‘
        function gameLoop() {
            if (!gameRunning) return;

            // æ›´æ–°ç§»åŠ¨æ–¹å‘
            direction = nextDirection;

            // åˆ›å»ºæ–°è›‡å¤´
            let head = { ...snake[0] };
            switch(direction) {
                case 'up': head.y--; break;
                case 'down': head.y++; break;
                case 'left': head.x--; break;
                case 'right': head.x++; break;
            }

            // æ·»åŠ æ–°è›‡å¤´
            snake.unshift(head);

            // ç¢°æ’æ£€æµ‹ï¼šè¾¹ç•Œ
            if (head.x < 0 || head.x >= gridCount || head.y < 0 || head.y >= gridCount) {
                endGame();
                return;
            }

            // ç¢°æ’æ£€æµ‹ï¼šæ’åˆ°è‡ªå·±
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    endGame();
                    return;
                }
            }

            // æ£€æµ‹åƒåˆ°é£Ÿç‰©
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                scoreNum.textContent = score;
                food = generateFood();
            } else {
                snake.pop(); // æ²¡åƒåˆ°é£Ÿç‰©ç§»é™¤è›‡å°¾
            }

            // ç»˜åˆ¶ç”»é¢
            drawGame();
        }

        // ç”Ÿæˆéšæœºé£Ÿç‰©
        function generateFood() {
            let food;
            while (!food || snake.some(segment => segment.x === food.x && segment.y === food.y)) {
                food = {
                    x: Math.floor(Math.random() * gridCount),
                    y: Math.floor(Math.random() * gridCount)
                };
            }
            return food;
        }

        // ç»˜åˆ¶æ¸¸æˆç”»é¢
        function drawGame() {
            // æ¸…ç©ºç”»å¸ƒï¼ˆæŸ”å’Œæµ…ç™½ï¼‰
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // ç»˜åˆ¶è›‡ï¼ˆæŸ”å’Œé…è‰²ï¼‰
            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? '#2ecc71' : '#a5d6a7'; // è›‡å¤´æ·±ç»¿ï¼Œè›‡èº«æµ…ç»¿
                ctx.beginPath(); // åœ†è§’çŸ©å½¢
                ctx.roundRect(
                    segment.x * gridSize + 1, 
                    segment.y * gridSize + 1, 
                    gridSize - 2, 
                    gridSize - 2, 
                    4 // åœ†è§’åŠå¾„
                );
                ctx.fill();
            });

            // ç»˜åˆ¶é£Ÿç‰©ï¼ˆæŸ”å’Œçº¢è‰²+åœ†è§’ï¼‰
            ctx.fillStyle = '#e57373';
            ctx.beginPath();
            ctx.roundRect(
                food.x * gridSize + 1, 
                food.y * gridSize + 1, 
                gridSize - 2, 
                gridSize - 2, 
                8 // é£Ÿç‰©æ›´å¤§çš„åœ†è§’
            );
            ctx.fill();
        }

        // æ¸¸æˆç»“æŸå¤„ç†
        function endGame() {
            gameRunning = false;
            finalScore.textContent = score; // æ˜¾ç¤ºæœ€ç»ˆåˆ†æ•°
            gameOver.style.display = 'block';
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            snake = [{ x: 9, y: 9 }];
            direction = 'right';
            nextDirection = 'right';
            food = generateFood();
            score = 0;
            scoreNum.textContent = score;
            gameRunning = true;
            gameOver.style.display = 'none';
            drawGame(); // é‡ç½®åç«‹å³é‡ç»˜
        }

        // åˆå§‹åŒ–ç»˜åˆ¶
        drawGame();
    </script>
</body>
</html>
